<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SPA E-commerce Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg: #dbeafe; /* light blue */
        --shell: #1d4ed8; /* strong blue */
        --panel: #eff6ff;
        --card: #ffffff;
        --border: #bfdbfe;
        --border-strong: #1d4ed8;
        --accent: #1d4ed8;
        --accent-soft: #bfdbfe;
        --text: #0f172a;
        --muted: #6b7280;
        --danger: #ef4444;
        --radius-lg: 16px;
        --shadow-soft: 0 16px 40px rgba(15, 23, 42, 0.35);
        --transition-fast: 0.18s ease-in-out;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden; /* non-scrolling SPA */
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(circle at top left, #bfdbfe, #dbeafe);
        color: var(--text);
      }

      button,
      input,
      select {
        font-family: inherit;
      }

      img {
        display: block;
        max-width: 100%;
      }

      .app-root {
        height: 100vh;
        display: flex;
        flex-direction: column;
        padding: 10px;
      }

      .shell {
        flex: 1;
        border-radius: var(--radius-lg);
        background: linear-gradient(135deg, var(--shell), #2563eb);
        box-shadow: var(--shadow-soft);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        border: 1px solid #1e40af;
      }

      /* Top bar */
      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 14px;
        border-bottom: 1px solid rgba(191, 219, 254, 0.5);
        background: linear-gradient(90deg, #1d4ed8, #2563eb);
        color: #eff6ff;
      }

      .logo-wrap {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .logo-badge {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #eff6ff;
        color: #1d4ed8;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
        font-weight: 700;
        box-shadow: 0 0 0 1px #bfdbfe, 0 10px 25px rgba(15, 23, 42, 0.4);
      }

      .logo-title {
        font-size: 13px;
        font-weight: 600;
        letter-spacing: -0.03em;
      }

      .logo-sub {
        font-size: 10px;
        color: #dbeafe;
      }

      .topbar-center {
        flex: 1;
        display: flex;
        justify-content: center;
      }

      .search-bar {
        width: 100%;
        max-width: 320px;
        position: relative;
      }

      .search-input {
        width: 100%;
        border-radius: 999px;
        border: 1px solid #bfdbfe;
        background: #eff6ff;
        color: var(--text);
        padding: 7px 10px 7px 26px;
        font-size: 12px;
      }

      .search-input::placeholder {
        color: #9ca3af;
      }

      .search-icon {
        position: absolute;
        left: 9px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 11px;
        color: #60a5fa;
      }

      .topbar-actions {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .btn {
        border-radius: 999px;
        border: 1px solid transparent;
        background: rgba(239, 246, 255, 0.9);
        color: #1d4ed8;
        font-size: 11px;
        padding: 5px 10px;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        transition: background var(--transition-fast),
          color var(--transition-fast), border-color var(--transition-fast),
          transform var(--transition-fast);
      }

      .btn:hover {
        transform: translateY(-1px);
      }

      .btn-ghost {
        background: transparent;
        color: #eff6ff;
        border-color: rgba(191, 219, 254, 0.5);
      }

      .btn-ghost:hover {
        background: rgba(15, 23, 42, 0.18);
        border-color: #bfdbfe;
      }

      .btn-accent {
        background: #f97316;
        color: #ffffff;
        border-color: #ea580c;
      }

      .btn-accent:hover {
        background: #c2410c;
      }

      .btn-icon {
        width: 30px;
        height: 30px;
        padding: 0;
        border-radius: 50%;
      }

      .cart-icon-badge {
        position: relative;
        font-size: 13px;
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -6px;
        font-size: 9px;
        background: #ef4444;
        color: #ffffff;
        border-radius: 999px;
        padding: 0 4px;
        border: 1px solid #fee2e2;
      }

      /* Content area */
      .content {
        flex: 1;
        display: flex;
        overflow: hidden;
        background: linear-gradient(135deg, #bfdbfe, #eff6ff);
      }

      .sidebar {
        width: 140px;
        border-right: 1px solid #bfdbfe;
        background: #eff6ff;
        padding: 10px 8px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .sidebar-title {
        font-size: 10px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.09em;
        margin-bottom: 4px;
      }

      .nav-item {
        font-size: 11px;
        border-radius: 999px;
        border: 1px solid transparent;
        padding: 5px 8px;
        color: var(--muted);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
        background: transparent;
        transition: background var(--transition-fast),
          color var(--transition-fast), border-color var(--transition-fast);
      }

      .nav-item span.dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: #bfdbfe;
      }

      .nav-item.active {
        background: #1d4ed8;
        border-color: #1d4ed8;
        color: #eff6ff;
      }

      .nav-item.active span.dot {
        background: #eff6ff;
      }

      .nav-item:hover {
        background: #e0f2fe;
        color: #1d4ed8;
        border-color: #bfdbfe;
      }

      /* Admin nav hidden for customers */
      #admin-nav {
        display: none;
      }

      .main-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 10px;
        overflow: hidden;
      }

      .view {
        display: none;
        flex: 1;
        border-radius: 12px;
        border: 1px solid #bfdbfe;
        background: #eff6ff;
        padding: 10px;
        overflow: hidden;
      }

      .view.active {
        display: flex;
      }

      .view-inner {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .view-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 11px;
        margin-bottom: 6px;
      }

      .view-title {
        font-weight: 600;
        color: #111827;
      }

      .view-sub {
        color: var(--muted);
      }

      .pill {
        font-size: 9px;
        border-radius: 999px;
        border: 1px solid #bfdbfe;
        padding: 2px 8px;
        color: var(--muted);
        background: #ffffff;
      }

      /* Products grid */
      .products-grid-wrapper {
        flex: 1;
        border-radius: 10px;
        border: 2px solid var(--danger); /* bright red border around product area */
        padding: 8px;
        display: flex;
        flex-direction: column;
        background: #fef2f2; /* subtle red background */
        overflow: hidden;
      }

      .products-grid {
        flex: 1;
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        gap: 6px;
      }

      .product-card {
        position: relative;
        border-radius: 9px;
        border: 1px solid #fecaca; /* soft red */
        background: var(--card);
        padding: 4px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        gap: 3px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(248, 113, 113, 0.15);
        transition: transform var(--transition-fast),
          box-shadow var(--transition-fast), border-color var(--transition-fast);
      }

      .product-card::before {
        /* small red corner mark */
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 12px;
        height: 4px;
        background: var(--danger);
        border-radius: 9px 0 9px 0;
      }

      .product-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(248, 113, 113, 0.3);
        border-color: var(--danger);
      }

      .product-image-frame {
        border-radius: 7px;
        overflow: hidden;
        background: #fee2e2;
        height: 58px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .product-image-frame img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-name {
        font-size: 10px;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: #111827;
      }

      .product-meta-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .product-price {
        font-size: 10px;
        font-weight: 600;
        color: #b91c1c;
      }

      .product-tag {
        font-size: 9px;
        color: var(--muted);
      }

      .product-badge {
        position: absolute;
        top: 4px;
        right: 4px;
        font-size: 9px;
        padding: 1px 5px;
        border-radius: 999px;
        background: #ef4444;
        color: #fef2f2;
        border: 1px solid #fee2e2;
      }

      .product-footer-row {
        margin-top: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .product-stock {
        font-size: 9px;
        color: var(--muted);
      }

      .product-add-btn {
        border-radius: 999px;
        border: 1px solid #ef4444;
        background: #fecaca;
        color: #7f1d1d;
        font-size: 9px;
        padding: 2px 7px;
        cursor: pointer;
        transition: background var(--transition-fast),
          border-color var(--transition-fast), transform var(--transition-fast);
      }

      .product-add-btn:hover {
        background: #ef4444;
        border-color: #b91c1c;
        color: #fef2f2;
        transform: translateY(-0.5px);
      }

      /* Cart / Checkout / Admin layouts */
      .cart-layout {
        flex: 1;
        display: flex;
        gap: 8px;
        overflow: hidden;
      }

      .cart-left,
      .cart-right {
        flex: 1;
        border-radius: 9px;
        border: 1px solid #bfdbfe;
        background: #ffffff;
        padding: 8px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .cart-list {
        flex: 1;
        overflow: hidden;
      }

      .cart-empty {
        font-size: 11px;
        color: var(--muted);
      }

      .cart-item {
        display: grid;
        grid-template-columns: 36px 1fr auto;
        gap: 6px;
        font-size: 10px;
        padding: 4px 0;
        border-bottom: 1px dashed #e5e7eb;
      }

      .cart-item:last-child {
        border-bottom: none;
      }

      .cart-thumb {
        width: 36px;
        height: 36px;
        border-radius: 6px;
        overflow: hidden;
        background: #fee2e2;
      }

      .cart-name {
        font-size: 10px;
        font-weight: 500;
        color: #111827;
      }

      .cart-meta {
        font-size: 9px;
        color: var(--muted);
      }

      .cart-qty-row {
        margin-top: 2px;
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .cart-qty-btn {
        width: 16px;
        height: 16px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
        background: #eff6ff;
        color: #111827;
        font-size: 10px;
        cursor: pointer;
      }

      .cart-qty-display {
        min-width: 16px;
        text-align: center;
        font-size: 9px;
      }

      .cart-remove {
        font-size: 9px;
        color: #b91c1c;
        border: none;
        background: transparent;
        cursor: pointer;
      }

      .cart-item-total {
        font-size: 10px;
        font-weight: 600;
        text-align: right;
        color: #b91c1c;
      }

      .cart-summary-row {
        display: flex;
        justify-content: space-between;
        font-size: 10px;
        margin-bottom: 3px;
      }

      .cart-summary-row strong {
        font-weight: 600;
      }

      .cart-summary-total {
        padding-top: 4px;
        margin-top: 4px;
        border-top: 1px dashed #e5e7eb;
      }

      .cart-summary-note {
        font-size: 9px;
        color: var(--muted);
        margin-top: 4px;
      }

      /* Checkout */
      .checkout-form {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        font-size: 11px;
      }

      .checkout-fields {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 6px;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .field-label {
        font-size: 10px;
        color: var(--muted);
      }

      .field-input {
        border-radius: 7px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        color: #111827;
        font-size: 11px;
        padding: 4px 6px;
      }

      .field-input::placeholder {
        color: #9ca3af;
      }

      .small-note {
        font-size: 9px;
        color: var(--muted);
        margin-top: 4px;
      }

      /* Admin */
      .admin-layout {
        flex: 1;
        display: flex;
        gap: 8px;
        overflow: hidden;
      }

      .admin-column {
        flex: 1;
        border-radius: 9px;
        border: 1px solid #bfdbfe;
        background: #ffffff;
        padding: 6px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .admin-label {
        font-size: 10px;
        color: var(--muted);
        margin-bottom: 3px;
      }

      .admin-table {
        flex: 1;
        overflow-y: auto;
        scrollbar-width: thin;
      }

      .admin-row {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr 0.8fr;
        gap: 4px;
        font-size: 10px;
        padding: 3px 0;
        border-bottom: 1px dashed #e5e7eb;
      }

      .admin-row:last-child {
        border-bottom: none;
      }

      .admin-input {
        border-radius: 6px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        color: #111827;
        font-size: 10px;
        padding: 3px 4px;
        width: 100%;
      }

      .admin-small-note {
        font-size: 9px;
        color: var(--muted);
        margin-top: 3px;
      }

      .admin-add-form {
        display: flex;
        flex-direction: column;
        gap: 4px;
        font-size: 10px;
      }

      /* Image modal */
      .modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 50;
      }

      .modal-backdrop.active {
        display: flex;
      }

      .modal-content {
        max-width: 80vw;
        max-height: 80vh;
        border-radius: 12px;
        overflow: hidden;
        border: 2px solid #ef4444;
        background: #ffffff;
        box-shadow: 0 22px 45px rgba(0, 0, 0, 0.7);
        position: relative;
      }

      .modal-content img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #ffffff;
      }

      .modal-close {
        position: absolute;
        top: 6px;
        right: 6px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
        background: #ffffff;
        color: #111827;
        padding: 2px 8px;
        font-size: 11px;
        cursor: pointer;
      }

      @media (max-width: 900px) {
        .products-grid {
          grid-template-columns: repeat(5, minmax(0, 1fr));
        }
      }

      @media (max-width: 768px) {
        .sidebar {
          display: none;
        }

        .cart-layout,
        .admin-layout,
        .checkout-fields {
          flex-direction: column;
          display: flex;
        }

        .checkout-fields {
          grid-template-columns: minmax(0, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <div class="app-root">
      <div class="shell">
        <header class="topbar">
          <div class="logo-wrap">
            <div class="logo-badge">SPA</div>
            <div>
              <div class="logo-title">E-commerce SPA</div>
              <div class="logo-sub">Single file template</div>
            </div>
          </div>
          <div class="topbar-center">
            <div class="search-bar">
              <span class="search-icon">üîç</span>
              <input
                id="search-input"
                class="search-input"
                type="text"
                placeholder="Search products..."
              />
            </div>
          </div>
          <div class="topbar-actions">
            <button
              type="button"
              class="btn btn-ghost"
              data-view-target="home"
            >
              Home
            </button>
            <button
              type="button"
              class="btn btn-ghost"
              data-view-target="products"
            >
              Products
            </button>
            <button
              type="button"
              class="btn btn-icon btn-ghost"
              id="cart-button"
              data-view-target="cart"
            >
              <span class="cart-icon-badge">
                üõí
                <span class="cart-count" id="cart-count">0</span>
              </span>
            </button>
          </div>
        </header>

        <div class="content">
          <aside class="sidebar">
            <div class="sidebar-title">Views</div>
            <button class="nav-item active" data-view-target="home">
              <span class="dot"></span>
              <span>Overview</span>
            </button>
            <button class="nav-item" data-view-target="products">
              <span class="dot"></span>
              <span>Catalog</span>
            </button>
            <button class="nav-item" data-view-target="cart">
              <span class="dot"></span>
              <span>Cart</span>
            </button>
            <button class="nav-item" data-view-target="checkout">
              <span class="dot"></span>
              <span>Checkout</span>
            </button>
            <!-- Hidden admin nav (only owner knows) -->
            <button class="nav-item" data-view-target="admin" id="admin-nav">
              <span class="dot"></span>
              <span>Admin</span>
            </button>
          </aside>

          <main class="main-panel">
            <!-- HOME VIEW -->
            <section class="view active" id="view-home" data-view="home">
              <div class="view-inner">
                <div class="view-header">
                  <div>
                    <div class="view-title">Store overview</div>
                    <div class="view-sub">
                      Single page application with 10 products and live cart.
                    </div>
                  </div>
                  <div class="pill">SPA ¬∑ No scroll</div>
                </div>
                <div class="products-grid-wrapper">
                  <div
                    class="view-sub"
                    style="margin-bottom: 4px; font-size: 10px"
                  >
                    Featured items (click any image to enlarge, or use the top
                    search bar).
                  </div>
                  <div
                    class="products-grid"
                    id="home-products-grid"
                  ></div>
                </div>
              </div>
            </section>

            <!-- PRODUCTS VIEW -->
            <section class="view" id="view-products" data-view="products">
              <div class="view-inner">
                <div class="view-header">
                  <div>
                    <div class="view-title">Products catalog</div>
                    <div class="view-sub">
                      Exactly 10 demo products. Filtered by the search bar
                      above.
                    </div>
                  </div>
                  <div class="pill" id="products-count-pill">
                    10 products
                  </div>
                </div>
                <div class="products-grid-wrapper">
                  <div
                    class="view-sub"
                    style="margin-bottom: 4px; font-size: 10px"
                    id="products-filter-info"
                  >
                    Showing all products.
                  </div>
                  <div
                    class="products-grid"
                    id="products-grid"
                  ></div>
                </div>
              </div>
            </section>

            <!-- CART VIEW -->
            <section class="view" id="view-cart" data-view="cart">
              <div class="view-inner">
                <div class="view-header">
                  <div>
                    <div class="view-title">Shopping cart</div>
                    <div class="view-sub">
                      Small cart summary with quantity controls.
                    </div>
                  </div>
                  <div class="pill">
                    Items: <span id="cart-pill-count">0</span>
                  </div>
                </div>
                <div class="cart-layout">
                  <div class="cart-left">
                    <div class="view-sub" style="margin-bottom: 4px">
                      Cart items
                    </div>
                    <div class="cart-list" id="cart-items"></div>
                  </div>
                  <div class="cart-right">
                    <div class="view-sub" style="margin-bottom: 4px">
                      Summary
                    </div>
                    <div>
                      <div class="cart-summary-row">
                        <span>Subtotal</span>
                        <span id="cart-subtotal">$0.00</span>
                      </div>
                      <div class="cart-summary-row">
                        <span>Estimated tax (10%)</span>
                        <span id="cart-tax">$0.00</span>
                      </div>
                      <div class="cart-summary-row">
                        <span>Shipping</span>
                        <span id="cart-shipping">$0.00</span>
                      </div>
                      <div class="cart-summary-row cart-summary-total">
                        <strong>Total</strong>
                        <strong id="cart-total">$0.00</strong>
                      </div>
                      <p class="cart-summary-note">
                        This is front-end demo math. Replace with your own
                        rules or backend-calculated totals.
                      </p>
                      <button
                        type="button"
                        class="btn btn-accent"
                        style="width: 100%; margin-top: 4px"
                        data-view-target="checkout"
                      >
                        Go to checkout
                      </button>
                      <button
                        type="button"
                        class="btn btn-ghost"
                        style="width: 100%; margin-top: 4px"
                        id="clear-cart-btn"
                      >
                        Clear cart
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- CHECKOUT VIEW -->
            <section class="view" id="view-checkout" data-view="checkout">
              <div class="view-inner">
                <div class="view-header">
                  <div>
                    <div class="view-title">Minimal checkout</div>
                    <div class="view-sub">
                      Only mobile number, postal code, house number, and street
                      name are required.
                    </div>
                  </div>
                  <div class="pill">
                    Cart total:
                    <span id="checkout-total-label">$0.00</span>
                  </div>
                </div>
                <div class="cart-layout">
                  <div class="cart-left">
                    <div class="view-sub" style="margin-bottom: 4px">
                      Checkout fields
                    </div>
                    <form class="checkout-form" id="checkout-form">
                      <div class="checkout-fields">
                        <div class="field">
                          <label class="field-label" for="checkout-mobile"
                            >Mobile number</label
                          >
                          <input
                            id="checkout-mobile"
                            class="field-input"
                            type="tel"
                            placeholder="+1 555 123 4567"
                            required
                          />
                        </div>
                        <div class="field">
                          <label class="field-label" for="checkout-postal"
                            >Postal code</label
                          >
                          <input
                            id="checkout-postal"
                            class="field-input"
                            type="text"
                            placeholder="Postal code"
                            required
                          />
                        </div>
                        <div class="field">
                          <label class="field-label" for="checkout-house"
                            >House number</label
                          >
                          <input
                            id="checkout-house"
                            class="field-input"
                            type="text"
                            placeholder="House no."
                            required
                          />
                        </div>
                        <div class="field">
                          <label class="field-label" for="checkout-street"
                            >Street name</label
                          >
                          <input
                            id="checkout-street"
                            class="field-input"
                            type="text"
                            placeholder="Street name"
                            required
                          />
                        </div>
                      </div>
                      <div>
                        <p class="small-note">
                          This checkout flow is presentational. On submit it
                          shows a demo confirmation and clears the cart. Plug in
                          your real backend here.
                        </p>
                        <button
                          type="submit"
                          class="btn btn-accent"
                          style="width: 100%; margin-top: 4px"
                        >
                          Complete order (demo)
                        </button>
                      </div>
                    </form>
                  </div>
                  <div class="cart-right">
                    <div class="view-sub" style="margin-bottom: 4px">
                      Order preview
                    </div>
                    <div class="cart-list" id="checkout-preview"></div>
                  </div>
                </div>
              </div>
            </section>

            <!-- ADMIN VIEW (hidden, only via 2004) -->
            <section class="view" id="view-admin" data-view="admin">
              <div class="view-inner">
                <div class="view-header">
                  <div>
                    <div class="view-title">Admin panel (mock)</div>
                    <div class="view-sub">
                      Edit product name/price, mock image upload and add
                      placeholder products. Data only lives in JavaScript.
                    </div>
                  </div>
                  <div class="pill">
                    Owner access only
                  </div>
                </div>
                <div class="admin-layout">
                  <div class="admin-column">
                    <div class="admin-label">
                      Product list (edit fields live)
                    </div>
                    <div class="admin-table" id="admin-products-table"></div>
                    <div class="admin-small-note">
                      Changes update the in-memory PRODUCTS array and instantly
                      refresh the storefront views.
                    </div>
                    <button
                      type="button"
                      class="btn btn-ghost"
                      style="margin-top: 6px"
                      data-view-target="home"
                    >
                      ‚Üê Back to storefront
                    </button>
                  </div>
                  <div class="admin-column">
                    <div class="admin-label">
                      Image placeholder &amp; add product (mock)
                    </div>
                    <div class="admin-small-note">
                      Upload is simulated: selecting a file only updates the
                      product image URL variable to a red-themed placeholder.
                    </div>
                    <div class="admin-add-form" style="margin-top: 6px">
                      <div class="field">
                        <label
                          class="field-label"
                          for="admin-image-product"
                          >Select product for image placeholder</label
                        >
                        <select
                          id="admin-image-product"
                          class="admin-input"
                        ></select>
                      </div>
                      <div class="field">
                        <label class="field-label"
                          >Upload image (placeholder only)</label
                        >
                        <input
                          id="admin-image-file"
                          type="file"
                          class="admin-input"
                        />
                        <div class="admin-small-note">
                          File is not uploaded. The script sets a demo red
                          placeholder image URL for the selected product.
                        </div>
                      </div>

                      <hr
                        style="
                          border: none;
                          border-top: 1px dashed #e5e7eb;
                          margin: 6px 0;
                        "
                      />

                      <div class="field">
                        <label class="field-label" for="admin-add-name"
                          >New product name (placeholder)</label
                        >
                        <input
                          id="admin-add-name"
                          class="admin-input"
                          type="text"
                          placeholder="New product name"
                        />
                      </div>
                      <div class="field">
                        <label class="field-label" for="admin-add-price"
                          >New product price (placeholder)</label
                        >
                        <input
                          id="admin-add-price"
                          class="admin-input"
                          type="number"
                          step="0.01"
                          placeholder="99.00"
                        />
                      </div>
                      <button
                        type="button"
                        class="btn btn-ghost"
                        id="admin-add-btn"
                      >
                        Add product (demo)
                      </button>
                      <div class="admin-small-note">
                        New product is added to the PRODUCTS array in memory.
                        Main catalog still shows the first 10 items so the
                        storefront always displays exactly 10 products.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </main>
        </div>
      </div>
    </div>

    <!-- Image modal -->
    <div class="modal-backdrop" id="image-modal">
      <div class="modal-content">
        <button
          class="modal-close"
          id="image-modal-close"
          type="button"
        >
          Close
        </button>
        <img id="image-modal-img" src="" alt="Product image" />
      </div>
    </div>

    <script>
      // ---------------------------
      // Data model (10 products exactly)
      // ---------------------------
      const PRODUCTS = [
        {
          id: "p1",
          name: "Premium Wireless Headphones",
          description:
            "Noise-cancelling over-ear wireless headphones for focused work and travel.",
          price: 199,
          currency: "USD",
          stock: 12,
          tag: "Audio",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Headphones"
        },
        {
          id: "p2",
          name: "Smartwatch Sport Edition",
          description:
            "Fitness-focused smartwatch with heart rate tracking and GPS.",
          price: 149,
          currency: "USD",
          stock: 20,
          tag: "Wearables",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Smartwatch"
        },
        {
          id: "p3",
          name: "Minimalist Desk Lamp",
          description:
            "LED desk lamp with adjustable brightness for modern workspaces.",
          price: 59,
          currency: "USD",
          stock: 35,
          tag: "Home Office",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Desk+Lamp"
        },
        {
          id: "p4",
          name: "Ergonomic Office Chair",
          description:
            "Adjustable ergonomic chair designed for long desk sessions.",
          price: 249,
          currency: "USD",
          stock: 5,
          tag: "Home Office",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Office+Chair"
        },
        {
          id: "p5",
          name: "Cotton Oversized Hoodie",
          description:
            "Soft unisex hoodie for everyday comfort and casual wear.",
          price: 69,
          currency: "USD",
          stock: 42,
          tag: "Fashion",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Hoodie"
        },
        {
          id: "p6",
          name: "Leather Crossbody Bag",
          description:
            "Compact leather bag sized for daily essentials and travel.",
          price: 129,
          currency: "USD",
          stock: 18,
          tag: "Fashion",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Bag"
        },
        {
          id: "p7",
          name: "Wireless Mechanical Keyboard",
          description:
            "Compact mechanical keyboard with wireless connectivity and tactile switches.",
          price: 119,
          currency: "USD",
          stock: 25,
          tag: "Electronics",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Keyboard"
        },
        {
          id: "p8",
          name: "Ceramic Coffee Mug Set",
          description:
            "Set of 4 ceramic mugs in neutral tones for home or office.",
          price: 39,
          currency: "USD",
          stock: 60,
          tag: "Kitchen",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Coffee+Mugs"
        },
        {
          id: "p9",
          name: "Noise Isolating Earbuds",
          description:
            "Compact in-ear earbuds with clear sound and passive noise isolation.",
          price: 49,
          currency: "USD",
          stock: 50,
          tag: "Audio",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Earbuds"
        },
        {
          id: "p10",
          name: "Stainless Steel Water Bottle",
          description:
            "Insulated stainless steel bottle for cold and hot drinks on the go.",
          price: 29,
          currency: "USD",
          stock: 80,
          tag: "Outdoor",
          image:
            "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Water+Bottle"
        }
      ];

      const NAV_VIEWS = ["home", "products", "cart", "checkout", "admin"];

      const state = {
        currentView: "home",
        searchQuery: "",
        cart: []
      };

      function formatPrice(value, currency = "USD") {
        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency
        }).format(value);
      }

      function getProductById(id) {
        return PRODUCTS.find((p) => p.id === id);
      }

      function getFilteredProducts() {
        let list = PRODUCTS.slice(0, 10); // exactly 10 products shown
        const q = state.searchQuery.trim().toLowerCase();
        if (q && q !== "2004") {
          list = list.filter((p) => {
            return (
              p.name.toLowerCase().includes(q) ||
              p.description.toLowerCase().includes(q)
            );
          });
        }
        return list;
      }

      function getCartItemCount() {
        return state.cart.reduce((sum, item) => sum + item.quantity, 0);
      }

      function calculateCartTotals() {
        let subtotal = 0;
        state.cart.forEach((item) => {
          const product = getProductById(item.productId);
          if (!product) return;
          subtotal += product.price * item.quantity;
        });
        const tax = subtotal * 0.1;
        const shipping = subtotal > 0 && subtotal < 200 ? 9 : 0;
        const total = subtotal + tax + shipping;
        return { subtotal, tax, shipping, total };
      }

      function switchView(view) {
        if (!NAV_VIEWS.includes(view)) return;
        state.currentView = view;

        NAV_VIEWS.forEach((v) => {
          const section = document.querySelector(`[data-view="${v}"]`);
          if (section) section.classList.toggle("active", v === view);
        });

        document.querySelectorAll("[data-view-target]").forEach((btn) => {
          const target = btn.getAttribute("data-view-target");
          if (btn.classList.contains("nav-item")) {
            btn.classList.toggle("active", target === view);
          }
        });

        if (view === "home") renderHome();
        if (view === "products") renderProductsView();
        if (view === "cart") renderCartView();
        if (view === "checkout") renderCheckoutView();
        if (view === "admin") renderAdminView();
      }

      // Product card rendering
      function createProductCard(product) {
        const card = document.createElement("div");
        card.className = "product-card";

        card.innerHTML = `
          <div class="product-image-frame">
            <img src="${product.image}" alt="${product.name}" />
          </div>
          <span class="product-badge">${product.tag}</span>
          <div class="product-name" title="${product.name}">
            ${product.name}
          </div>
          <div class="product-meta-row">
            <span class="product-price">${formatPrice(
              product.price,
              product.currency
            )}</span>
            <span class="product-tag">${
              product.stock > 0 ? product.stock + " in stock" : "Out of stock"
            }</span>
          </div>
          <div class="product-footer-row">
            <span class="product-stock">Tap image to enlarge</span>
            <button class="product-add-btn" type="button">Add</button>
          </div>
        `;

        const imgEl = card.querySelector("img");
        imgEl.addEventListener("click", (e) => {
          e.stopPropagation();
          openImageModal(product.image);
        });

        const addBtn = card.querySelector(".product-add-btn");
        addBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          addToCart(product.id, 1);
        });

        return card;
      }

      function renderHome() {
        const grid = document.getElementById("home-products-grid");
        if (!grid) return;
        grid.innerHTML = "";
        getFilteredProducts().forEach((product) => {
          grid.appendChild(createProductCard(product));
        });
      }

      function renderProductsView() {
        const grid = document.getElementById("products-grid");
        const pill = document.getElementById("products-count-pill");
        const info = document.getElementById("products-filter-info");
        if (!grid || !pill || !info) return;

        const products = getFilteredProducts();
        grid.innerHTML = "";
        products.forEach((product) => {
          grid.appendChild(createProductCard(product));
        });

        pill.textContent = `${products.length} products`;
        if (!state.searchQuery || state.searchQuery === "2004") {
          info.textContent = "Showing all products.";
        } else {
          info.textContent = `Filter active: "${state.searchQuery}".`;
        }
      }

      // Cart logic
      function addToCart(productId, quantity) {
        const existing = state.cart.find((item) => item.productId === productId);
        if (existing) {
          existing.quantity += quantity;
        } else {
          state.cart.push({ productId, quantity });
        }
        updateCartIndicators();
        if (state.currentView === "cart") renderCartView();
        if (state.currentView === "checkout") renderCheckoutView();
      }

      function updateCartQuantity(productId, quantity) {
        if (quantity <= 0) {
          state.cart = state.cart.filter((item) => item.productId !== productId);
        } else {
          const item = state.cart.find((i) => i.productId === productId);
          if (item) item.quantity = quantity;
        }
        updateCartIndicators();
        renderCartView();
        renderCheckoutView();
      }

      function clearCart() {
        state.cart = [];
        updateCartIndicators();
        renderCartView();
        renderCheckoutView();
      }

      function updateCartIndicators() {
        const count = getCartItemCount();
        const badge = document.getElementById("cart-count");
        const pillCount = document.getElementById("cart-pill-count");
        if (badge) badge.textContent = String(count);
        if (pillCount) pillCount.textContent = String(count);
      }

      function renderCartView() {
        const list = document.getElementById("cart-items");
        const subtotalEl = document.getElementById("cart-subtotal");
        const taxEl = document.getElementById("cart-tax");
        const shippingEl = document.getElementById("cart-shipping");
        const totalEl = document.getElementById("cart-total");
        if (!list || !subtotalEl || !taxEl || !shippingEl || !totalEl) return;

        list.innerHTML = "";

        if (state.cart.length === 0) {
          const empty = document.createElement("div");
          empty.className = "cart-empty";
          empty.textContent =
            "Your cart is empty. Add products from the catalog.";
          list.appendChild(empty);
        } else {
          state.cart.forEach((item) => {
            const product = getProductById(item.productId);
            if (!product) return;

            const row = document.createElement("div");
            row.className = "cart-item";
            row.innerHTML = `
              <div class="cart-thumb">
                <img src="${product.image}" alt="${product.name}" />
              </div>
              <div>
                <div class="cart-name">${product.name}</div>
                <div class="cart-meta">
                  ${formatPrice(product.price, product.currency)} each
                </div>
                <div class="cart-qty-row">
                  <button class="cart-qty-btn" data-action="dec">-</button>
                  <span class="cart-qty-display">${item.quantity}</span>
                  <button class="cart-qty-btn" data-action="inc">+</button>
                  <button class="cart-remove" data-action="remove" type="button">
                    remove
                  </button>
                </div>
              </div>
              <div class="cart-item-total">
                ${formatPrice(
                  product.price * item.quantity,
                  product.currency
                )}
              </div>
            `;

            const decBtn = row.querySelector('[data-action="dec"]');
            const incBtn = row.querySelector('[data-action="inc"]');
            const remBtn = row.querySelector('[data-action="remove"]');

            decBtn.addEventListener("click", () => {
              updateCartQuantity(product.id, item.quantity - 1);
            });
            incBtn.addEventListener("click", () => {
              updateCartQuantity(product.id, item.quantity + 1);
            });
            remBtn.addEventListener("click", () => {
              updateCartQuantity(product.id, 0);
            });

            list.appendChild(row);
          });
        }

        const totals = calculateCartTotals();
        subtotalEl.textContent = formatPrice(totals.subtotal);
        taxEl.textContent = formatPrice(totals.tax);
        shippingEl.textContent = formatPrice(totals.shipping);
        totalEl.textContent = formatPrice(totals.total);
      }

      // Checkout
      function renderCheckoutView() {
        const preview = document.getElementById("checkout-preview");
        const totalEl = document.getElementById("checkout-total-label");
        if (!preview || !totalEl) return;

        preview.innerHTML = "";

        if (state.cart.length === 0) {
          const empty = document.createElement("div");
          empty.className = "cart-empty";
          empty.textContent =
            "Your cart is empty. Add products before checking out.";
          preview.appendChild(empty);
        } else {
          state.cart.forEach((item) => {
            const product = getProductById(item.productId);
            if (!product) return;
            const row = document.createElement("div");
            row.className = "cart-item";
            row.innerHTML = `
              <div class="cart-thumb">
                <img src="${product.image}" alt="${product.name}" />
              </div>
              <div>
                <div class="cart-name">${product.name}</div>
                <div class="cart-meta">
                  Qty: ${item.quantity} ¬∑ ${formatPrice(
              product.price,
              product.currency
            )} each
                </div>
              </div>
              <div class="cart-item-total">
                ${formatPrice(
                  product.price * item.quantity,
                  product.currency
                )}
              </div>
            `;
            preview.appendChild(row);
          });
        }

        const totals = calculateCartTotals();
        totalEl.textContent = formatPrice(totals.total);
      }

      // Admin view
      function renderAdminView() {
        const table = document.getElementById("admin-products-table");
        const select = document.getElementById("admin-image-product");
        if (!table || !select) return;

        table.innerHTML = "";
        select.innerHTML = "";

        PRODUCTS.forEach((product) => {
          const row = document.createElement("div");
          row.className = "admin-row";
          row.innerHTML = `
            <div>
              <div class="admin-label">Name</div>
              <input class="admin-input" data-field="name" value="${product.name}" />
            </div>
            <div>
              <div class="admin-label">Price</div>
              <input class="admin-input" data-field="price" type="number" step="0.01" value="${product.price}" />
            </div>
            <div>
              <div class="admin-label">Tag</div>
              <input class="admin-input" data-field="tag" value="${product.tag}" />
            </div>
          `;

          const inputs = row.querySelectorAll(".admin-input");
          inputs.forEach((input) => {
            input.addEventListener("input", () => {
              const field = input.getAttribute("data-field");
              if (!field) return;
              if (field === "price") {
                product.price = parseFloat(input.value || "0");
              } else if (field === "name") {
                product.name = input.value;
              } else if (field === "tag") {
                product.tag = input.value;
              }
              renderHome();
              renderProductsView();
              renderCartView();
              renderCheckoutView();
            });
          });

          table.appendChild(row);

          const option = document.createElement("option");
          option.value = product.id;
          option.textContent = product.name;
          select.appendChild(option);
        });
      }

      function bindAdminControls() {
        const imageFileInput = document.getElementById("admin-image-file");
        const imageProductSelect =
          document.getElementById("admin-image-product");
        const addBtn = document.getElementById("admin-add-btn");
        const addNameInput = document.getElementById("admin-add-name");
        const addPriceInput = document.getElementById("admin-add-price");

        if (imageFileInput && imageProductSelect) {
          imageFileInput.addEventListener("change", () => {
            const productId = imageProductSelect.value;
            const product = getProductById(productId);
            if (!product) return;

            product.image =
              "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=Updated";
            alert(
              "Image upload is mocked. Product image URL was updated to a red placeholder."
            );
            renderHome();
            renderProductsView();
            renderCartView();
            renderCheckoutView();
          });
        }

        if (addBtn && addNameInput && addPriceInput) {
          addBtn.addEventListener("click", () => {
            const name = addNameInput.value.trim();
            const price = parseFloat(addPriceInput.value || "0");
            if (!name || !price) {
              alert(
                "Please enter a name and price for the placeholder product."
              );
              return;
            }
            const newProduct = {
              id: "new-" + Date.now(),
              name,
              description:
                "Placeholder product created from the admin panel.",
              price,
              currency: "USD",
              stock: 0,
              tag: "Placeholder",
              image:
                "https://via.placeholder.com/300x200/fee2e2/7f1d1d?text=New"
            };
            PRODUCTS.push(newProduct);
            alert(
              "Placeholder product added in memory. Main storefront still shows the first 10 items."
            );
            renderAdminView();
            renderHome();
            renderProductsView();
          });
        }
      }

      // Image modal
      function openImageModal(src) {
        const modal = document.getElementById("image-modal");
        const img = document.getElementById("image-modal-img");
        if (!modal || !img) return;
        img.src = src;
        modal.classList.add("active");
      }

      function closeImageModal() {
        const modal = document.getElementById("image-modal");
        if (!modal) return;
        modal.classList.remove("active");
      }

      // Search & secret admin code
      function bindSearch() {
        const input = document.getElementById("search-input");
        if (!input) return;

        const handleValue = () => {
          const value = input.value.trim();
          if (value === "2004") {
            input.value = "";
            state.searchQuery = "";
            switchView("admin");
            renderAdminView();
            return;
          }
          state.searchQuery = value;
          renderHome();
          renderProductsView();
        };

        input.addEventListener("keyup", (e) => {
          if (e.key === "Enter") {
            handleValue();
          } else {
            handleValue();
          }
        });
      }

      // Navigation
      function bindNavigation() {
        document.querySelectorAll("[data-view-target]").forEach((el) => {
          el.addEventListener("click", () => {
            const target = el.getAttribute("data-view-target");
            if (!target) return;
            switchView(target);
          });
        });

        const modal = document.getElementById("image-modal");
        const closeBtn = document.getElementById("image-modal-close");
        if (modal) {
          modal.addEventListener("click", (e) => {
            if (e.target === modal) closeImageModal();
          });
        }
        if (closeBtn) {
          closeBtn.addEventListener("click", () => {
            closeImageModal();
          });
        }
      }

      // Checkout binding
      function bindCheckoutForm() {
        const form = document.getElementById("checkout-form");
        if (!form) return;
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          if (state.cart.length === 0) {
            alert(
              "Your cart is empty. Please add products before completing the order."
            );
            return;
          }
          const mobile = document.getElementById("checkout-mobile").value;
          const postal = document.getElementById("checkout-postal").value;
          const house = document.getElementById("checkout-house").value;
          const street = document.getElementById("checkout-street").value;

          alert(
            "Order placed (demo).\n\nMobile: " +
              mobile +
              "\nPostal: " +
              postal +
              "\nHouse: " +
              house +
              "\nStreet: " +
              street +
              "\n\nConnect this handler to a real backend or API to store orders."
          );

          clearCart();
        });
      }

      // Other bindings
      function bindCartControls() {
        const clearBtn = document.getElementById("clear-cart-btn");
        if (clearBtn) {
          clearBtn.addEventListener("click", () => {
            if (
              confirm(
                "Clear all items from the cart? This cannot be undone in this demo."
              )
            ) {
              clearCart();
            }
          });
        }
      }

      function init() {
        bindNavigation();
        bindSearch();
        bindCheckoutForm();
        bindCartControls();
        bindAdminControls();

        renderHome();
        renderProductsView();
        renderCartView();
        renderCheckoutView();
        renderAdminView();
        updateCartIndicators();
      }

      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
